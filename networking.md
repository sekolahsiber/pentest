# Networking
### Protokol
* Apa yang akan anda dapatkan?
  * Mengetahui protokol yang sering digunakan
  * Mengetahui cara kerja protokol agar bisa mengeksploitasinya

#### Protokol
  * Pada jaringan komputer, setiap mesin akan berinteraksi dengan mesin lain menggunakan protokol
  * Setiap mesin sebagian besar memiliki perangkat keras, perangkat lunak, atau pun cara berkomunikasi yang berbeda
  * Protokol bertujuan untuk mempersatukan itu, tidak peduli apa perangkat kerasnya, tidak peduli sistem operasinya, atau pun perangkat lunaknya. Semua mesin bisa berkomunikasi menggunakan protokol yang sama dan sudah ditetapkan
 
* Paket
  * Tujuan utama dalam jaringan adalah mengirimkan data antar mesin, data tersebut dibawa oleh paket
  * Paket adalah stream bit yang bergerak sebagai sinyal elektrik di media fisik seperti kabel atau pun udara pada jaringan WiFi
  * Sinyal elektrik tersebut diinterpretasikan sebagai bits (0 dan 1) dan disusun menjadi data
 
#### Struktur paket
Setiap paket memiliki struktur seperti ini:
<p align="center"><img src="https://user-images.githubusercontent.com/91247935/136876560-32f51aac-7431-4cc1-b860-89b0a2997c9f.PNG"</p>
  
Header berguna sebagai penanda bagi penerima, dimana penerima dapat menggunakan protokol yang sesuai setelah melihat header yang dikirimkan pengirim
<p align="center"><img src="https://user-images.githubusercontent.com/91247935/136877383-21f917ef-9582-4989-aa55-a049835764f5.PNG"</p>

Payload adalah informasi sesungguhnya, bisa bagian dari pesan email atau bagian file yang didownload
<p align="center"><img src="https://user-images.githubusercontent.com/91247935/136877774-6df5fb0f-5336-4708-a4de-18fca2211d1b.PNG"</p>

##### Contoh Header IP
Sebagai contoh, Header Protokol IP setidaknya memiliki panjang 160 bits (20 bytes), yang dimana sudah termasuk informasi untuk menginterpretasi konten pada paket IP tersebut
<p align="center"><img src="https://user-images.githubusercontent.com/91247935/136878081-36fbcd43-aed3-41eb-a32a-bae3054ff54f.PNG"</p>

4 bit pertama sebagai identifikasi versi IP, apakah digunakan IP versi 4 atau 6
<p align="center"><img src="https://user-images.githubusercontent.com/91247935/136878926-781ff932-ec24-4997-815b-3ad5b101c54a.PNG"</p>
  
32 Bit dimulai pada posisi 96 mempresentasikan alamat sumber
<p align="center"><img src="https://user-images.githubusercontent.com/91247935/136878943-2c9f465b-c833-4145-a4a7-85da679b148c.PNG"</p>

4 bit selanjutnya mempresentasikan alamat tujuan
<p align="center"><img src="https://user-images.githubusercontent.com/91247935/136878946-7d748d36-eb5e-4274-8f7e-91703d556698.PNG"</p>

Menggunakan informasi dari header, setiap perangkat dapat paham cara berkomunikasi yang tepat dan menggunakan paket IP
  
#### Protokol Layers (Lapisan Protokol)
* Pada contoh sebelumnya, sudah dijelaskan header IP (Internet Protocol). Banyak sekali protokol diluar sana, masing-masing memiliki kegunaannya sendiri-sendiri, seperti untuk melakukan pertukaran email, file, melakukan koneksi dari klien ke server dan lain-lain
* Mari kita coba fokus ke setiap fitur protokol
  * Membuat aplikasi bisa bekerja (klien email, FTP, Browser, dan lain-lain)
  * Mentransmisikan data (Server dan Program klien)
  * Mengidentifikasi host
  * Menggunakan media fisik untuk mengirimkan paket
* Kita bisa menuliskannya seperti ini
 
   | Application Layer (Lapisan Aplikasi) |
   | - |
   | Transport Layer (Lapisan Transport) |
   | Network Layer (Lapisan Jaringan) |
   | Physical Layer (Lapisan Fisik) |
  
  
* Lapisan aplikasi bekerja diatas lapisan transport, lapisan transport bekerja diatas lapisan jaringan, dan seterusnya  , setiap lapisan memiliki protokolnya masing-masing
* Contoh
  * Setiap lapisan melayani lapisan diatasnya
  * Lapisan aplikasi tidak harus mengetahui bagaimana mencari alamat tujuan, bagaimana mencapai alamat tujuan, dan bagaimana menggunakan kabel tembaga untuk melakukan komunikasi
  * Itu semua tugas lapisan dibawahnya
  
#### ISO/OSI
* Pada 1984, International Organization for Standardization (ISO) mempublikasikan model tentang komunikasi sistem jaringan yang disebut Open System Interconnection (ISO) model
* ISO/OSI model tidak pernah di implementasikan, tetapi luas digunakan pada literatur atau perbincangan tentang jaringan IT
* ISO/OSI terdapat 7 lapisan yang berguna untuk referensi membangun protokol yang sesungguhnya
* Kalian bisa mencari informasi lebihnya di [sini](http://support.microsoft.com/kb/103884)
  
#### Enkapsulasi
* Tapi bagaimana cara protokol bisa bekerja sama? jika setiap protokol memiliki header dan payload yang berbeda, apa hubungan lapisan atas dan lapisan dibawahnya?
* Simpel, semua paket lapisan atas protokol (header + payload) adalah payload pada lapisan dibawahnya, disebut dengan encapsulation
* Contoh TCP/IP mempunyai 4 lapisan:
  <p align="center"><img src="https://user-images.githubusercontent.com/91247935/136882915-930614fe-a4bd-47ca-8b73-6e0695222524.PNG"</p>

  * Kalian akan belajar cara bagaimana TCP/IP bekerja pada course ini   
  * Lapisan Aplikasi memberikan paketnya ke lapisan transport dan lapisan transport menambahkan header miliknya
  <p align="center"><img src="https://user-images.githubusercontent.com/91247935/136883210-8047044e-53a8-4aaf-a5bb-2add1850afc8.PNG"</p>

  * Paket lapisan aplikasi sekarang adalah payload lapisan transport
  <p align="center"><img src="https://user-images.githubusercontent.com/91247935/136883088-8e60bdb0-332d-4ac9-8b08-e090be512b50.PNG"</p>

  * Teknik yang sama digunakan pada lapisan selanjutnya
  <p align="center"><img src="https://user-images.githubusercontent.com/91247935/136883097-317666e9-d192-42e8-96cf-c7c8724f0600.PNG"</p>
  <p align="center"><img src="https://user-images.githubusercontent.com/91247935/136883166-f67995b1-eef5-4d9f-aea9-3778a71648dd.PNG"</p>
  <p align="center"><img src="https://user-images.githubusercontent.com/91247935/136883299-ce45afd8-9ce1-4489-a872-7ba06d990e55.PNG"</p>
  <p align="center"><img src="https://user-images.githubusercontent.com/91247935/136883327-9d0d7871-be9f-4531-90e5-8278be5f65c5.PNG"</p>

* Saat melakukan enkapsulasi setiap protokol menambahkan headernya masing-masing pada paket dan memperlakukannya seperti payload
* Ini terjadi pada setiap paket yang dikirimkan pengirim ke penerima

<p align="center"><img src="https://user-images.githubusercontent.com/91247935/136883362-03bf0c60-c4a1-4dc2-bb7b-47e83e59809e.PNG"</p>

* Penerima akan melakukan hal yang sama dengan urutan yang terbalik, jadi lapisan aplikasi tidak perlu mengetahui bagaimana cara lapisan transport, jaringan, dan link bekerja. Itu diatasi oleh paket pada lapisan dibawahnya
* Kalian akan melihat contoh latihan enkapsulasi pada sesi Wireshark
 
### Internet Protocol (IP)
* Apa yang akan anda dapatkan?
 * Mengetahui serangan jaringan
 * Menggunakan tool serangan jaringan secara maksimal
 * Belajar protokol jaringan lain

* Internet Protocol (IP) adalah protokol yang berjalan pada Lapisan Internet, dikenal sebagai TCP/IP
* IP Mengirimkan datagrams (Paket IP disebut datagrams) ke host yang ada pada jaringan, dan menggunakan alamat IP untuk mengidentifikasi host tersebut
 
#### Alamat IP versi 4 (IPv4)
* Disaat kalian menulis surat, kalian harus spesifik menuliskan alamat penerima. Sama juga di Internet, kalian harus menulis alamat IP penerima jika ingin mengirimkan suatu data
* Setiap host pada jaringan komputer, bisa pada jaringan privat atau Internet diidentifikasi dengan alamat IP yang unik
* Contoh:
 * Kebanyakan jaringan masih menggunakan IP versi 4 (IPv4)
 * Sebuah IP versi 4 dibangun dari 4 bytes atau octets, 1 bytes = 8 bits
  * contoh:
    | 72.5.12.132 |
    | - |
 
  * Titik memisahkan setiap octet
    <p align="center"><img src="https://user-images.githubusercontent.com/91247935/136900840-565ec365-4c6e-468d-a018-c313b596aa87.PNG"</p>
     
  * Dengan 8 bits, kita bisa mempresentasikan sebanyak 2<sup>8</sup> setiap octetnya yaitu dari 0 sampai 255
  * Tetapi tidak bisa juga kita memberikan alamat dari 0.0.0.0 sampai 255.255.255.255 ke sebuah host, beberapa alamat digunakan untuk tujuan spesial
  * Contoh:
     * 0.0.0.0 - 0.255.255.255 mempresentasikan jaringan yang dipakai (hanya valid jika digunakan sebagai alamat sumber)
     * 127.0.0.0 - 127.255.255.255 mempresentasikan sebagai jaringan lokal atau IP yang komputer kita pakai
     * 192.168.0.0 - 192.168.255.255 mempresentasikan sebagai jaringan privat
     * Detail bisa dikalian baca di [sini](https://en.wikipedia.org/wiki/Reserved_IP_addresses)
     
#### IP/Mask
* Contoh:
 * Untuk mengidentifikasi sebuah host, kalian harus tau jaringannya, untuk itu, kalian memerlukan alamat IP dan sebuah netmask. atau subnet mask
 * Dengan sebuah IP/netmask, kalian bisa mengidentifikasi bagian jaringan dan bagian host sebuah alamat IP
     * Contoh:
       | Alamat IP | 192.168.5.100 |
       | - | - |
       | Subnet mask | 255.255.255.0 |
     * Untuk mencari bagian jaringan kalian harus melakukan operasi AND bitwise antara netmask dan alamat IP, cek bagian [arimatika binary](https://github.com/sekolahsiber/pentest/blob/main/Introduction.md#binary-arithmetic-basics) 
     * Pada contoh ini kita akan melihat bagaimana mencari bagian jaringan alamat IP/mask:
       | 192.168.33.12/255.255.224.0 |
       | - |
     
     * Konversi octet ke dalam bilangan binary:
     
       <p align="center"><img src="https://user-images.githubusercontent.com/91247935/136902923-24871076-15f3-4ce0-ad81-1cf8f1d0904a.PNG"</p>
        
     * Lakukan operasi AND bitwise
       <p align="center"><img src="https://user-images.githubusercontent.com/91247935/136903054-748a9a66-021f-40cc-ab64-0ac006d55080.PNG"</p>
        
     * 192.168.32.0 adalah prefix jaringan. kalian bisa mengidentifikasi jaringan dengan notasi berikut:
       | 192.168.33.0/255.255.224.0 |
       | - |
     
     * Atau bisa kalian tulis menjadi 19 dimana jumlah dari bits 1
       | 255.255.255.224.0 | --> | 11111111.11111111.11100000.00000 |
       | - | - | - |
       
        
       | 192.168.33.0/19 |
       | - |
        
     * 19 adalah notasi Classless Inter-Domain Routing (CIDR)
* Contoh Host IP/Mask
 * Alamat yang bukan bagian dari netmask adalah bagian host atau komputer dari alamat IP. Kalian bisa mencarinya dengan melakukan operasi AND bitwise dengan inverse dari netmask
 * Mari kita lihat dengan contoh IP/Mask yang sama:
   <p align="center"><img src="https://user-images.githubusercontent.com/91247935/136904323-cfc5e0ed-5b42-4323-a8b4-fae0e46658b0.PNG"</p>
    
 * Invers netmasknya dengan melakukan operasi NOT bitwise:
   <p align="center"><img src="https://user-images.githubusercontent.com/91247935/136904526-373d76bb-dff7-442f-ad45-c9cdd9fc1eff.PNG"</p>
    
 * Melakukan operasi AND bitwise:
   <p align="center"><img src="https://user-images.githubusercontent.com/91247935/136904691-03605fa9-22fd-4486-b0f2-b43eef0add95.PNG"</p>

 * Dengan begitu invers dari netmask mempresentasikan berapa banyak IP yang bisa dipakai pada komputer klien
 * Pada contoh kita, kita memiliki 13 bits untuk mempresentasikan banyaknya host, ini berarti pada jaringan tersebut dapat memiliki 2<sup>13</sup> = 8192 alamat yang berbeda
        
#### Alamat Network dan Brodcast
* Terdapat 2 alamat spesial:
 * Pertama dibuat dengan angka 0 semua
 * Kedua dibuat dengan angkat 1 semua

* Alamat spesial ini digunakan sebagai alamat network dan alamat broadcast, dimana mengurangi 2 alamat dari host yang bisa dipakai, jika pada jaringan bisa menggunakan 16 alamat berbeda, maka hanya 14 yang bisa digunakan sebagai alamat host dan 2 alamat digunakan sebagai alamat network dan alamat broadcast
    
#### Review IP
* Contoh IP
 * 10.54.12.0/24 (10.54.12.0/255.255.255.255.0)
  * 11111111.11111111.11111111.1111111 --> terdapat 32 angka 1, maka mencari banyaknya alamat dengan 32-24 = 8, 8 sebagai pangkat dari 2
  * Terdapat 2<sup>8</sup> = 256 alamat
  * 10.54.12.0 adalah alamat network berdasarkan standar pre-CIDR
  * 10.54.12.255 adalah alamat broadcast berdasarkan standar pre-CIDR
 
 * 192.168.114.32/27 (192.168.114.32/255.255.255.224)
  * 11111111.11111111.11111111.1111111 --> terdapat 32 angka 1, maka mencari banyaknya alamat dengan 32-27 = 5, 5 sebagai pangkat dari 2
  * Terdapat 2<sup>5</sup> = 32 alamat
  * 192.168.114.32 adalah alamat network berdasarkan standar pre-CIDR
  * 192.168.114.63 adalah alamat broadcast berdasarkan standar pre-CIDR
    
* Diberikan jaringan 172.16.2.0/23
 * 172.16.3.12 dan 172.16.2.66 terdapat pada jaringan yang sama
 * 172.16.3.240 dan 172.16.4.2 tidak terdapat pada jaringan yang sama

* Jaringan 192.168.1.0/16
 * Tidak masuk akal karena operasi AND bitwise antara 192.168.1.0 dan 255.255.0.0 memberikan 192.168.0.0 sebagai alamat network
 * Bisa saja alamat IP di jaringan 192.168.1.0/16 valid
    
* Kalian bisa melakukan latihan menggunakan kalkulator subnet
 * [Kalkulator Classful](https://www.subnet-calculator.com/)
 * [Kalkulator CIDR](https://www.subnet-calculator.com/cidr.php)

 
  
  <p align="center"><img src=""</p>
